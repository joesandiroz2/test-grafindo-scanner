<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grafindo Scanner</title>
<!-- Link ke CSS Bootstrap -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<!-- SweetAlert2 JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>


<style>
    label{
        font-weight: bold;
    }
    .spesial_char{
        font-weight: bold;
        font-size: 25px;
        color:black;
    }
    .modal-dialog {
    width: 100vw;
    height: 100vh;
    margin: 0;
    padding: 0;
    max-width: 100%;
}

.modal-content {
    height: 100vh;
    display: flex;
    flex-direction: column;
}

.modal-body {
    flex-grow: 1;
    overflow-y: auto;
}


</style>
</head>
<body>

<!-- Tempat untuk memuat navbar -->
<div id="navbar-container"></div>

<div class="container">
    <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-12">
    <h5 style="font-weight:bold">Scan Input Disini</h5>
        <textarea 
        style="border:2px solid black; width:100%; height:80px; font-size: 15px;color:black; font-weight: bold; text-align: center;" 
        placeholder="scan barcode disini" 
        autofocus 
        id="txtscan">
    </textarea>
    </div>
</div>

</div>
<div class="container mt-5">
<h4 style="font-weight: bold;">Buat Label Partnumber</h4>
<form id="inputForm" class="card shadow" style="padding: 3px;">


<div class="row">
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="merk">Merk</label>
            <div>
                <div class="input-field">
                <select id="merk" name="merk" required>
                    <option value="" disabled selected>Pilih Merk</option>
                    <option value="Yamaha">Yamaha</option>
                    <option value="Honda">Honda</option>
                </select>
            </div>

            </div>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="part_number">Part Number</label>
            <input type="text"

             class="spesial_char form-control" id="part_number" required>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="nama_barang">Nama Barang</label>
            <input type="text" class="spesial_char form-control" id="nama_barang" required>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="qty">Quantity (Pcs) </label>
            <input type="number" class="spesial_char form-control" id="qty" required>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="satuan">Satuan ( bikin berapa label ) </label>
            <input type="text" class="form-control" id="satuan" required>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="lot">Lot</label>
            <input type="text" class="form-control" id="lot" required>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="depo">Depo</label>
            <input value="DEPO"

             type="text" class="spesial_char form-control" id="depo" required>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="supplier_id">Supplier ID</label>
            <input type="text" class="form-control" id="supplier_id" required readonly>
        </div>
    </div>
    <div class="col-md-4 col-lg-4">
        <div class="form-group">
            <label for="tgl_inspeksi">Tanggal Inspeksi</label>
            <input type="date" class="form-control" id="tgl_inspeksi" required>
        </div>
    </div>
</div>
<button type="submit" class="btn btn-primary">Buat</button>
</form>
</div>

<div class="container">
<div class="row mt-5">
        <div class="col-sm-12 col-md-5 col-lg-5">
         <div class="card shadow-lg">
            <h6 style="background-color: #f50057 ;color: white;font-weight: bold;padding: 3px;text-align: center;">Data Barang</h6>

            <button id="tambahbarang" class="btn btn-primary">Tambah Barang</button>

            <div>
                <h6>Cari Part Number</h6>
                <input type="text" id="searchInput" placeholder="Masukkan Part Number">
                <button id="searchButton">Cari</button>
            </div>

             <div id="pagination" class="mt-3"></div>
        <div id="databarang"></div>
         </div>
    </div>
    <div class="col-sm-12 col-md-7 col-lg-7">
        <div class="card">
            <div id="loadinput"></div>
        </div>
    </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="printModal" tabindex="-1" role="dialog" aria-labelledby="printModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="printModalLabel">Detail Data</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Data akan dimasukkan di sini -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Tutup</button>
                <button type="button" class="btn btn-primary" id="printButton">Cetak</button>
            </div>
        </div>
    </div>
</div>


<!-- Modal Edit -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Edit Data</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <input type="hidden" id="editId">
                    <div class="form-group">
                        <label>Merk</label>
                        <input type="text" class="form-control" id="editMerk">
                    </div>
                    <div class="form-group">
                        <label>Part Number</label>
                        <input type="text" class="form-control" id="editPartNumber">
                    </div>
                    <div class="form-group">
                        <label>Nama Barang</label>
                        <input type="text" class="form-control" id="editNamaBarang">
                    </div>
                    <div class="form-group">
                        <label>Quantity</label>
                        <input type="number" class="form-control" id="editQty">
                    </div>
                    <div class="form-group">
                        <label>Satuan</label>
                        <input type="text" class="form-control" id="editSatuan">
                    </div>
                    <button type="button" class="btn btn-primary" onclick="saveEdit()">Simpan Perubahan</button>
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Modal Konfirmasi Hapus -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Konfirmasi Hapus</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Apakah Anda yakin ingin menghapus data ini?</p>
                <input type="hidden" id="deleteId">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="deleteData()">Hapus</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
            </div>
        </div>
    </div>
</div>

<!-- Tambah Barang Modal -->
<div class="modal fade" id="tambahBarangModal" tabindex="-1" aria-labelledby="tambahBarangModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tambahBarangModalLabel">Tambah Barang</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="tambahBarangForm">
                    <div class="form-group">
                        <label>Nomor Barang</label>
                        <input type="text" class="form-control" id="nomorBarang" required>
                    </div>
                    <div class="form-group">
                        <label>Nama Barang</label>
                        <input type="text" class="form-control" id="namaBarang" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Simpan</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Link ke jQuery dan JS Bootstrap -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="../js/sdk/pocketbase.umd.js"></script>
<script src="../js/pocket_config.js"></script>
<script src="./js/input_scan.js"></script>
<script src="./js/load_scan.js"></script>
<script src="./js/check_barang.js"></script>
<script src="./js/load_input.js"></script>
<script>


const pb = new PocketBase(pocketbaseUrl);

document.querySelector('#tambahbarang').addEventListener('click', function () {
    $('#tambahBarangModal').modal('show');
});

document.getElementById("printButton").addEventListener("click", function () {
    let printContents = document.getElementById("modalBody").innerHTML; // Ambil isi modal
    let printWindow = window.open("", "", "width=800,height=600");

    printWindow.document.write(`
        <html>
        <head>
            <title>Cetak Halaman</title>
            <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
            <style>
                body { font-family: Arial, sans-serif; }
                .spesial_char { font-weight: bold; font-size: 25px; color:black; }
                @media print {
                    body * {
                        visibility: hidden; /* Sembunyikan semua elemen */
                    }
                    #printContent, #printContent * {
                        visibility: visible; /* Tampilkan hanya yang ingin dicetak */
                    }
                    #printContent {
                        position: absolute;
                        left: 0;
                        top: 0;
                        width: 100%;
                    }
                }
            </style>
        </head>
        <body>
            <div id="printContent">
                ${printContents}
            </div>
            <script>
                window.onload = function() {
                    window.print();
                    window.close();
                }
            <\/script>
        </body>
        </html>
    `);
    
    printWindow.document.close();
});


$(document).ready(function() {
$("#navbar-container").load("../component/nav.html");

// Set default Supplier ID for Yamaha
$("#supplier_id").val("7603");

// Change Supplier ID based on selected Merk
$("input[name='merk']").change(function() {
if ($(this).val() === "Yamaha") {
    $("#supplier_id").val("7603");
} else if ($(this).val() === "Honda") {
    $("#supplier_id").val("1201591");
}
});
 const today = new Date().toISOString().split('T')[0];
    document.getElementById('tgl_inspeksi').value = today;
});
</script>
</body>
</html>