<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aplikasi Yamaha</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<style>
  .badge-shadow {
  box-shadow: 0 4px 6px rgba(0,0,0,0.8);
}

</style>
</head>
<body >

<div id="navbar-container"></div>

<div class="p-2">
  <div class=" mt-4">
  <h3>Sales List</h3>
  <div id="loading" class="loading-spinner">
    <div class="spinner-border text-primary" role="status"></div>
  </div>

    <!-- Pagination -->
    <nav>
      <ul class="pagination" id="pagination"></ul>
    </nav>



<div class="container my-3">
  <div class="row g-3 align-items-end">
    
    <!-- Filter H-X -->
    <div class="col-md-4 col-sm-12">
      <label for="filterHari" class="form-label fw-bold">Filter Berdasarkan Jarak Hari</label>
      <select id="filterHari" class="form-select">
        <option value="">-- Pilih H-X --</option>
      </select>
    </div>

    <!-- Tombol Toggle -->
    <div class="col-md-4 col-sm-12">
      <label class="form-label fw-bold d-block">&nbsp;</label>
      <button id="btnToggleAprove" class="btn btn-warning w-100">
        Tampilkan yg belum Aproved
      </button>
    </div>

  </div>
</div>




<div class="container">
  <!-- Tempat edit customer (inline, muncul saat klik tombol edit) -->
<div id="editCustomerContainer" style="display:none; margin-top:15px; padding:10px; border:1px solid #ccc; border-radius:5px;">
  <input type="hidden" id="editRecordId">
  <label for="customerSelect" class="form-label">Pilih Customer:</label>
  <select id="customerSelect" style="width:100%"></select>
  <div style="margin-top:10px;">
    <button id="saveCustomerBtn" class="btn btn-primary btn-sm">Simpan</button>
    <button id="cancelEditBtn" class="btn btn-secondary btn-sm">Batal</button>
  </div>
</div>
</div>

  <div id="table-container" style="display:none;">
   <table class="table  table-bordered table-striped text-white" style="background-color:#0d6efd;">
    <thead class="sticky-top table-dark" style="background-color:#0b5ed7; color:white;">
        <tr>
          <th>No </th>
          <th>No PO</th>
          <th>No SO</th>
          <th>PT</th>
          <th>Tgl Schedule</th>
          <th>Sales</th>
          <th>Io Acc</th>
          <th>Ok / Batal</th>
          <th>Dibuat</th>
          <th>Lihat</th>
        </tr>
      </thead>
      <tbody id="sales-body"></tbody>
    </table>
  
  </div>
</div>
</div>






<!-- Bootstrap & jQuery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- External JS -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="../../js/sdk/pocketbase.umd.js"></script>
<script src="../../js/pocket_config.js"></script>
<script src="./js/sales_order_list.js"></script>
<script>
  $(document).ready(function () {
    $("#navbar-container").load("../../component/nav.html", function () {
      setTimeout(loginUser, 500);
    });
     });


$("#btnToggleAprove").on("click", function () {
    filterBelumAproved = !filterBelumAproved; // toggle true/false

    if (filterBelumAproved) {
        $(this).text("Tampilkan semua").removeClass("btn-warning").addClass("btn-secondary");
    } else {
        $(this).text("Tampilkan yg belum Aproved").removeClass("btn-secondary").addClass("btn-warning");
    }

    loadSalesData(1); // reload data
});



document.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("filterHari");

  // generate H-1 sampai H-300
  for (let i = 1; i <= 300; i++) {
    const opt = document.createElement("option");
    opt.value = i;           // value = 1,2,3... (bisa dipake untuk query)
    opt.textContent = `H-${i}`;
    select.appendChild(opt);
  }

  // kalau mau include "Hari ini" juga
  const optToday = document.createElement("option");
  optToday.value = 0;
  optToday.textContent = "Hari ini";
  select.insertBefore(optToday, select.children[1]); 
});
</script>

</body>
</html>
