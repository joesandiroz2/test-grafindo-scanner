<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRUD Data Barang</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
</head>
<body>
<div id="navbar-container"></div>
<div class="container mt-2">
<h2>Data Barang</h2>
<button class="btn btn-primary" data-toggle="modal" data-target="#addModal">Tambah Barang</button>

<div class="row mt-2">
    <div class="col-sm-12 col-md-6">
    <div class="card">
        <h6 style="font-weight: bold;">cari barang ketik nomor part</h6>
    <input type="text" class="form-control" id="input_cari_part" placeholder="ketik no part ">
    <button id="cari_part" class="btn btn-info">cari</button>
    </div>
</div>
</div>

<div id="loadingSpinner" class="text-center">
    <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
    </div>
    <p class="mt-2 text-primary">Sedang mengambil data barang...</p>
</div>




<div class="container">
<div id="pagination" class="mt-3">
<!-- Pagination buttons will be added here -->
</div>
</div>
<div class="card">
    
<table class="table mt-1 table-responsive" id="dataTable">
<thead>
<tr>
    <th>Gambar</th>
    <th>Nama Barang</th>
    <th>Part Number</th>
    <th>Ikut Set</th>
    <th>Aksi</th>
</tr>
</thead>
<tbody id="dataBody">
<!-- Data akan ditambahkan di sini -->
</tbody>
</table>
</div>
</div>

<!-- Modal untuk Tambah Barang -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
    <h5 class="modal-title" id="addModalLabel">Tambah Barang</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <form id="addForm">
        <div class="form-group">
            <label for="nama_barang">Nama Barang</label>
            <input type="text" class="form-control" id="nama_barang" required>
        </div>
        <div class="form-group">
            <label for="part_number">Part Number</label>
            <input type="text" class="form-control" id="part_number" required>
        </div>
       
       <div class="form-group">
    <label>
        <input type="checkbox" id="toggle_set_input"> Ada Set BARU?
    </label>
        </div>
        <div class="form-group" id="ikut_set_group">
            <label for="ikut_set">Ikut Set</label>
            <select class="form-control" id="ikut_set">
                <option value="">Pilih Ikut Set</option>
                <!-- Opsi akan ditambahkan di sini -->
            </select>
            <input type="text" class="form-control mt-2" id="ikut_set_input" placeholder="Masukkan Set Baru" style="display: none;">
        </div>



        <div class="form-group">
            <label for="gambar">Gambar</label>
            <input type="file" class="form-control" id="gambar" >
        </div>
        <button type="submit" class="btn btn-primary">Simpan</button>
    </form>
</div>
</div>
</div>
</div>


<!-- Modal untuk Edit Barang -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Edit Barang</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form id="editForm">
            <div class="form-group">
                <label for="edit_nama_barang">Nama Barang</label>
                <input type="text" class="form-control" id="edit_nama_barang" required>
            </div>
            <div class="form-group">
                <label for="edit_part_number">Part Number</label>
                <input type="text" class="form-control" id="edit_part_number" required>
            </div>
           <div class="form-group">
              <label>
                <input type="checkbox" id="toggle_edit_set_input"> Ada Set BARU?
              </label>
            </div>
            <div class="form-group" id="edit_ikut_set_group">
              <label for="edit_ikut_set">Ikut Set</label>
              <select class="form-control" id="edit_ikut_set">
                <option value="">Pilih Ikut Set</option>
                <!-- Opsi dropdown akan diisi dari loadIkutSetOptions -->
              </select>
              <input type="text" class="form-control mt-2" id="edit_ikut_set_input" placeholder="Masukkan Set Baru" style="display: none;">
            </div>

            <div class="form-group">
                <label for="edit_gambar">Gambar</label>
                <input type="file" class="form-control" id="edit_gambar">
            </div>
            <input type="hidden" id="edit_record_id"> <!-- Hidden input untuk menyimpan ID record -->
            <button type="submit" 
            id="submitButton" 
            class="btn btn-primary">Simpan</button>
        </form>
    </div>
</div>
</div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="../../js/sdk/pocketbase.umd.js"></script>
<script src="../../js/pocket_config.js"></script>

<script src="./js/data_barang.js"></script>
<script src="./js/loadset.js"></script>
</body>
<script>
$(document).ready(function() {
    $("#navbar-container").load("../../component/nav.html",function(){
        setTimeout(loginUser, 500);
    });

    $("#toggle_set_input").change(function() {
        if ($(this).is(":checked")) {
            $("#ikut_set").hide();
            $("#ikut_set_input").show();
        } else {
            $("#ikut_set_input").hide();
            $("#ikut_set").show();
        }
    });

    $('#toggle_edit_set_input').change(function() {
      if ($(this).is(':checked')) {
        $('#edit_ikut_set').hide();
        $('#edit_ikut_set_input').show();
      } else {
        $('#edit_ikut_set_input').hide();
        $('#edit_ikut_set').show();
      }
    });

})
</script>
</html>